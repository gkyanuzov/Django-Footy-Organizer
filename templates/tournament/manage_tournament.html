{% load crispy_forms_filters %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Sofia Footy</title>
    <!-- Latest compiled and minified CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="https://img.lovepik.com/free-png/20210919/lovepik-ink-splashing-football-png-image_400310287_wh1200.png">
    <link rel="stylesheet" href="{% static 'css/tournament_tree.css' %}"/>

<!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>

<body>
<nav class="navbar navbar-expand-sm bg-success">
    <div class="container-fluid">
        <a class="navbar-brand" href="{%  url  'show home' %}">
          <img src="/staticfiles/images/Logo-removebg-preview.png" alt="Logo" style="width:70px;" class="rounded-pill">
        </a>        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav mx-auto ">
             <li class="nav-item ">
                 {% if  request.user.is_authenticated %}
                        <a class="nav-link text-dark"  href="{% url 'profile details' request.user.id%}">Profile</a>
                {% endif %}
             </li>
             {% if  request.user.is_authenticated %}
             <li class="nav-item dropdown">
                <a class="nav-link text-dark dropdown-toggle" href="#"  role="button" data-bs-toggle="dropdown">Team</a>
                <ul class="dropdown-menu bg-success">
                    {% if not player.team %}
                        <li><a class="dropdown-item text-dark fs-5" href="{% url 'create team' %}">Create Team</a></li>
                    {% endif %}
                    {% if player.team  %}
                        <li><a class="dropdown-item text-dark fs-5" href="{% url 'team details' player.team.id%}">My Team</a></li>
                    {% endif %}
                    {% if not player.team %}
                        <li><a class="dropdown-item text-dark fs-5" href="{% url 'join team' %}">Join Team</a></li>
                    {% endif %}
                </ul>
             </li>
            {% endif %}

            {% if  request.user.is_authenticated %}
             <li class="nav-item dropdown">
                 <a class="nav-link text-dark dropdown-toggle" href="#"  role="button" data-bs-toggle="dropdown">Tournament</a>
                     <ul class="dropdown-menu bg-success">
                            {% if player.is_captain and not player.team.tournament %}
                                <li><a class="dropdown-item text-dark fs-5" href="{% url 'create tournament' %}">Create Tournament</a></li>
                            {% endif %}
                            {% if player.team.tournament %}
                                <li><a class="dropdown-item text-dark fs-5" href="{% url 'tournament details' player.team.tournament.id %}">Current Tournament </a></li>
                            {% endif %}
                            {% if player.is_captain  and  not player.team.tournament%}
                                <li><a class="dropdown-item text-dark fs-5" href="{% url 'search tournaments' %}">Join Tournament</a></li>
                            {% endif %}
                     </ul>
             </li>
            {% endif %}

            {% if  request.user.is_authenticated %}
             <li class="nav-item">
                <a class="nav-link text-dark" href="#">Matches</a>
            </li>
            {% endif %}
            </ul>
            <div class="flex-row">
                {% if  request.user.is_authenticated %}
                    <a href="{% url 'show logout' %}?next={% url 'show start' %}" class="btn btn-lg btn-dark">Logout</a>
                {% endif %}
            </div>
        </div>
    </div>
</nav>
<div class="container-fluid m-4">
    <a class="display-6 link-dark fw-bold text-decoration-none" href="{%  url  'show home' %}">Amateur Footy Organizer</a>
</div>

<div class="row">
<div class="col-4 m-4 justify-content-center fs-6 bg-gradient p-2 ">
    <form class="p-2" method="post" action="{% url 'manage tournament' %}">
        {% csrf_token %}
        {{ form|crispy}}
        <button class="btn btn-primary mt-1 mb-4" type="submit">Create</button>
    </form>
</div>

<div class="col-7 m-4 ms-5 justify-content-center  bg-gradient">
    {% if matches|length == first_round_size %}
    <h2 class="ms-5 text-center">First round matches</h2>
    {% endif %}
         <table class="table table-striped table-hover mb-3">
                <thead class="border-end border-3 border-dark bg-success">
                    <tr>
                        <th>Home Team</th>
                        <th>Score</th>
                        <th>Away Team</th>
                        <th>Date</th>
                        <th></th>
                    </tr>
                </thead>
                    <tbody>
                        {% for match in first_round_matches %}
                            <tr>
                                <td class="fw-bold fs-5">{{ match.home_team.name}}</td>
                                <td class="fw-bold fs-5">{{ match.home_team_goals}}:{{ match.away_team_goals}}</td>
                                <td class="fw-bold fs-5">{{ match.away_team.name}}</td>
                                <td class="fw-bold fs-5">{{ match.date}}</td>
                                <td>
                                    <a class="btn btn-sm btn-primary" href="{% url 'edit match' match.pk %}">Add Score</a>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
            </table>
</div>
</div>

<div class=" m-5 justify-content-start">
{#    <h1>{{ tournament.name }}</h1>#}
{#    {%  if tournament.size == 16 %}#}
{#    <main id="tournament">#}
{#      <ul class="round round-1">#}
{#          {% for match in matches %}#}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">{{ match.home_team.name }} <span> {{ match.home_team_goals}}</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">{{ match.away_team.name }} <span>{{ match.away_team_goals }}</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{#        {% endfor %}#}
{##}
{#        <li class="game game-top winner">Colo St <span>84</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Missouri <span>72</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top ">Oklahoma St <span>55</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom winner">Oregon <span>68</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Saint Louis <span>64</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">New Mexico St <span>44</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Memphis <span>54</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">St Mary's <span>52</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Mich St <span>65</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Valparaiso <span>54</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Creighton <span>67</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Cincinnati <span>63</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Duke <span>73</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Albany <span>61</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{#      </ul>#}
{#      <ul class="round round-2">#}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Lousville <span>82</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Colo St <span>56</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Oregon <span>74</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Saint Louis <span>57</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top ">Memphis <span>48</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom winner">Mich St <span>70</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top ">Creighton <span>50</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom winner">Duke <span>66</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{#      </ul>#}
{#      <ul class="round round-3">#}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Lousville <span>77</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Oregon <span>69</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top ">Mich St <span>61</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom winner">Duke <span>71</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{#      </ul>#}
{#      <ul class="round round-4">#}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Lousville <span>85</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Duke <span>63</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{#      </ul>#}
{#    </main>#}
{#    {% endif %}#}
{##}
{#    {% if tournament.size == '8' %}#}
{#        <main id="tournament">#}
{#      <ul class="round round-1">#}
{#          {% for match in matches %}#}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">{{ match.home_team.name }} <span> {{ match.home_team_goals}}</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">{{ match.away_team.name }} <span>{{ match.away_team_goals }}</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{#        {% endfor %}#}
{##}
{#      </ul>#}
{#      <ul class="round round-2">#}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">{{ match.home_team.name }} <span>{{ match.home_team_goals}}</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">{{ match.away_team.name }} <span>{{ match.away_team_goals }}</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#      </ul>#}
{#      <ul class="round round-3">#}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Lousville <span>77</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Oregon <span>69</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top ">Mich St <span>61</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom winner">Duke <span>71</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{#      </ul>#}
{#      <ul class="round round-4">#}
{#        <li class="spacer">&nbsp;</li>#}
{##}
{#        <li class="game game-top winner">Lousville <span>85</span></li>#}
{#        <li class="game game-spacer">&nbsp;</li>#}
{#        <li class="game game-bottom ">Duke <span>63</span></li>#}
{##}
{#        <li class="spacer">&nbsp;</li>#}
{#      </ul>#}
{#    </main>#}
{#    {% endif %}#}
{##}
{#        </div>#}

<div class="foot" >
<footer class="fixed-bottom card-footer bg-success">
    <div>@2022 Софийска аматьорска лига</div>
</footer>

</div>





</body>
</html>
